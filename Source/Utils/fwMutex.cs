#region Using framework
using System;
using System.Threading;
#endregion





namespace Pluton.Utils
{
    ///--------------------------------------------------------------------------------------
  




     ///=====================================================================================
    ///
    /// <summary>
    /// Блокировка потоков
    /// </summary>
    /// 
    ///--------------------------------------------------------------------------------------
    public class AMutex
    {
        ///--------------------------------------------------------------------------------------
        private bool    mLock   = false;
        private Thread  mThread = null;
        //private int     mCount  = 0;
        ///--------------------------------------------------------------------------------------







        ///=====================================================================================
        ///
        /// <summary>
        /// Инциализация блокировки
        /// </summary>
        /// 
        ///--------------------------------------------------------------------------------------
        public AMutex()
        {
        }
        ///--------------------------------------------------------------------------------------








         ///=====================================================================================
        ///
        /// <summary>
        /// блокировка
        /// </summary>
        /// 
        ///--------------------------------------------------------------------------------------
        public void mutexLock()
        {
            /*
            if (mThread == Thread.CurrentThread)
            {
                int bMutex = 0;

            }
            */


            while (mLock)
            {
                Thread.Sleep(5);
            }
            mLock = true;
            mThread = Thread.CurrentThread;
        }
        ///--------------------------------------------------------------------------------------






         ///=====================================================================================
        ///
        /// <summary>
        /// снятие блокировки
        /// </summary>
        /// 
        ///--------------------------------------------------------------------------------------
        public void mutexUnlock()
        {
            mLock = false;
            mThread = null;
        }
        ///--------------------------------------------------------------------------------------













    }//AMutex
}